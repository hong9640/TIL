# DB
## 개요
- 데이터베이스: 체계적인 데이터 모음
- 데이터: 저장이나 처리에 효율적인 형태로 변환된 정보
- 기존 데이터 저장 방식:  
  - 1. 파일 이용  
    - 1. 어디서나 쉽게 사용 가능
    - 2. 데이터를 구조적으로 관리하기 어려움움
  - 2. 스프레드 시트 이용  
    - 1. 테이블의 열과 행을 사용해 데이터를 구조적으로 관리 가능
    - 2. 하지만 100만행까지만 저장 가능
    - 3. 단순히 파일이나 링크 소유 여부에 따른 단순한 접근 권한 기능 제공
    - 4. 만약 한 데이터를 바꾸면 이 변경으로 인해 모든 테이블 위치에서 해당 값을 업데이트 해야 한다.
    - 5. 만약 여러 시트에 분산되어 있으면 누락이나 추가 문제가 발생할 수 있음.
- 결국 데이터베이스는 데이터를 저장하고 조작한다.

## Relational Database
- 데이터 간에 관계가 있는 데이터 항목들의 모음이다.
- 테이블, 행, 열의 정보를 구조화하는 방식
- 서로 관련된 데이터 포인터를 저장하고 이에 대한 액세스를 제공
- 관계: 여러 테이블 간의 (논리적) 연결
- 관계로 할 수 있는것: 특정 날짜에 구매한 고객 조회, 지난 달에 배송일이 지연된 고객 조회 등
- 만약 고객 데이터 간 비교를 위해서는 기본키(PK) 를 사용해야 한다.
- 만약 주문 테이블에서 누가 어떤 주문을 했는지 식멸하려면 외래키(FK)를 사용해야 한다.
- 관련 키워드:  
  - 1. Table: 데이터를 기록하는 곳
  - 2. Field: 각 필드에는 고유한 데이터 형식이 지정됨(세로)(컬럼)
  - 3. record: 각 레코드에는 구체적인 데이터 값이 저장됨(가로)(로우)
  - 4. Database: 테이블의 집합
  - 5. PK(기본키): 각 레코드의 고유한 값. 레코드의 식별자로 활용
  - 6. FK(외래키): 테이블의 필드 중 다른 테이블의 레코드를 식별할 수 있는 키  
    - 다른 테이블의 기본 키를 참조
    - 각 레코드에서 서로 다른 테이블 간의 관계를 만드는데 사용
## RDBMS
- DBMS: 데이터베이스를 관리하는 소프트웨어 프로그램
- 데이터 저장 및 관리를 용이하게 하는 시스템
- 데이터베이스와 사용자 간의 인터페이스 역할
- 사용자가 데이터 구성, 업데이트, 모니터링, 백업, 복구 등을 할 수 있도록 도움
- RDBMS: 관계형 데이터베이스를 관리하는 소프트웨어 프로그램
- sqlit, 오라클 등이 RDBMS 서비스 종류이다.
- 데이터는 기본 키 또는 왜리키를 통해 결합될 수 있는 여러 테이블에 걸쳐 구조화 됨.
## SQL
- 데이터베이스에 정보를 저장하고 처리하기 위한 프로그래밍 언어
- 정확히는 관계형 데이터베이스와의 대화를 위해 사용하는 프로그래밍 언어이다.
- SELECT colunb_name FROM table_name;
- sql 키워드는 대소분자 구분하지 않는다. 하지만 대문자로 작성하는 것을 권장한다. 위의 문장에서 대문자로 된 것이 sql 키워드 이다.
- 그리고 각 sql 문장 끝에는 세미콜론이 필요하다. 
## SQL statements
- SELECT colunb_name FROM table_name; 여기서 예시 코드는 SELECT statement라고 부른다.
- 이 문장은 select, from 2개의 키워드로 구성된다.
- 4가지 유형이 있다.  
  - DDL: 데이터 정의, 데이터의 기본 구조 및 형식 변경, CREATE, DROP, ALTER
  - DQL: 데이터 검색, SELECT -> 검색이 가장 중요!
  - DML: 데이터 조작(추가, 수정, 삭제), INSERT, UPDATE, DELETE
  - DCL: 데이터 제어, 데이터 및 작업에 대한 사용자 권한 제어, COMMIT, ROLLBACK, GRANT, REVOKE
## Querying data
- SELECT: 테이블에서 데이터를 조회한다.
- selsect 키워드 이후 데이터를 선택하려는 필드를 하나 이상 지정
- from 키워드 이후 데이터를 선택하려는 테이블의 이름을 지정
- 1. create-connections -> sqlite -> 아래 파란색 파일 버튼 누르기 -> 데이터베이스가 있는위치에서 찾기 -> 선택한 후 connect 누르기
- SELECT 
  LastName
FROM
  employees;
- 위의 코드는 employees테이블에서 lastname 필드의 모든 데이터를 조회한다.
- SELECT 
  *
FROM
  employees;
- 위의 코드는 employees테이블의 모든 필드를 가져온다.
- 만약 필드 옆에 AS '이름' 이렇게 하면 조회시 firstname이 아니라 '이름'으로 출력 될 수 있도록 변경
- Milliseconds / 60000 이런식으로 분 단위 값으로 출력이 가능하다.
- ORDER BY statement: 조회 결과의 레코드를 정렬, 기본적으로 오름차순으로 정렬한다.
- 내림차순은 FirstName DESC 이렇게 desc를 붙여야 한다.
- Country DESC, city; 이런 식은 country는 내림차순, city는 오름차순이다. 그런데 country필드를 기준으로 내림차순하고 이 기준으로 city 필드를 오름차순 한다. 그러니까 같은 나라별로 city가 오름차순 되는 것이다.
- 만약 null 값이 존재할 경우 null 값이 먼저 출력된다.
## Filtering data
- Clause:  
  - DISTINCT
  - WHERE
  - LIMIT
- Operator:  
  - BETWEEN
  - IN
  - LIKE
  - Comparison
  - Logical
- Distinct :조회 결과에서 중복된 레코드를 제거  
  - 1. select 키워드 바로 뒤에 작성해야 한다.
  - 2. select distinct 키워드 다음에 고유한 값을 선택하려는 하나 이상의 필드를 지정
- where: 조회 시 특정 검색 조건을 지정  
  - 1. from clause 뒤에 위치
  - 2. between을 쓰면 어디 사이의 값을 나오게 된다.
  - 3. in을 쓰면 or처럼 되서 해당하는 필드를 뽑게 된다.
  - 4. LastName LIKE '%son'; 이렇게 쓰면 lastname필드 값이 son으로 끝나는 데이터의 필드를 조회
- 이때 select -> from -> where -> order by 순으로 정렬한다.\
- Like: 값이 특정 패턴에 일치하는지 확인
  - %: 0개 이상의 문자열과 일치 하는지 확인
  - -: 단일 문자와 일치하는지 확인
  - '___a' 이건 모두 4자리이면서 끝자리가 a로 끝나는 것을 찾으라는 것이다.
- LIMIT: 조회하는 레코드 수를 제한  
  - 만약 limit 2, 5라고 하면 인덱스 처럼 2번 오프셋부터 5개의 오프셋을 뽑는다. 그러니 7번 오프셋까지 뽑는다.
  - ORDER BY Bytes DESC  
    LIMIT 7; - 이거는 바이츠를 기준으로 내림차순 하고 큰것부터 7개를 뽑으라는 의미 이다.
  - LIMIT 3, 4; 이거는 4번째부터 7번째 데이터만 조회. 인덱스처럼 이해해야 한다.
- group by:
- 레코드를 그룹화하여 요약본 생성. 이를 위해 집계함수가 필요
- 집계함수:  
  - sum, avg, max, min, count -> 전부 대문자로 써야 한다.
- GROUP BY  
  Country; - 이거는 country를 그룹화 하는 것이다.
- COUNT(*) - 이 함수가 각 그룹에 대한 집계된 값을 계산. 그러니까 만약 나라고 하면 해당 나라에 몇 명의 사람이 있는지 나타낼 수 있다.
- 그런데 집계 항목에 대한 세부 조건을 지정하기 위해서는 HAVING을 써야 한다.
- 예를 들어 AVG(Milliseconds / 60000) 이렇게 세부 조건이 있을 때는 having을 써야 한다.